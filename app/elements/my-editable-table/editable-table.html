<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-styles/typography.html">

<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">


<dom-module id="editable-table"> 
    
 <template>
     <style>
        table, th, td {
            margin:10px 0;
            border:solid 1px #333;
            padding:2px 4px;
            font:15px Verdana;
        }
        
        .customth {
            font: italic bold 12px/30px Georgia, serif;
        }        
         
     </style>
     <div id="tableDiv"></content></div>      
 </template>    
    
 <Script>
     Polymer({
         is: "editable-table",
         properties: {
             data: {
                 type: Object,
                 notify: true,
                 observer: 'dataChanged'
             },
             tableHeaderList: {
                 type: Array,
                 value: function(){return []}
             }
         },
        
         ready: function(){             
             console.log(this.data);
         },
         
         dataChanged: function(){             
            // EXTRACT VALUE FOR HTML HEADER.            
            for (var i = 0; i < this.data.length; i++) {
                for (var key in this.data[i]) {
                    if (this.tableHeaderList.indexOf(key) === -1) {
                        this.tableHeaderList.push(key);
                    }
                }
             }             
             // CREATE DYNAMIC TABLE.
             var table = document.createElement("table");
             // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.
             var tr = table.insertRow(-1);             
             for (var i = 0; i < this.tableHeaderList.length; i++) {
                 var th = document.createElement("th");      // TABLE HEADER.
                 th.setAttribute('class','customth style-scope editable-table');
                 th.innerHTML = this.tableHeaderList[i];
                 tr.appendChild(th);
             }
             
             // ADD JSON DATA TO THE TABLE AS ROWS.
             for (var i = 0; i < this.data.length; i++) {
                tr = table.insertRow(-1);
                for (var j = 0; j < this.tableHeaderList.length; j++) {
                    var tabCell = tr.insertCell(-1);
                    tabCell.innerHTML = this.data[i][this.tableHeaderList[j]];
                }
             }
             
             // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
             var divContainer = this.$.tableDiv;
             //divContainer.innerHTML = "";
             divContainer.appendChild(table);                            
         }
     });    
 </Script>

</dom-module>